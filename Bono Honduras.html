<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Solicitud de Bono Honduras</title>
  <meta name="description" content="Formulario para recopilar datos: nombre completo, número de identidad, teléfono y trabajo." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 60 60'><rect width='60' height='60' fill='%230066b3'/><circle cx='30' cy='30' r='12' fill='%23fff'/></svg>"> 
  <style>
    :root{
      --bg:#f5f7fb; --card:#ffffff; --text:#0f172a; --muted:#475569; --brand:#0066b3; --accent:#0ea5e9; --ring:#93c5fd;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:860px;margin:32px auto;padding:0 16px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:16px}
    .brand img{height:60px;object-fit:contain}
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{background:#e2f0ff;color:#03437a;border:1px solid #cfe6ff;padding:6px 10px;border-radius:999px;font-size:12px}
    .card{background:var(--card);border:1px solid #e2e8f0;border-radius:16px;box-shadow:0 10px 30px rgba(2,8,23,.06)}
    .hero{padding:20px 20px 8px}
    .hero h1{margin:0 0 8px;font-size:clamp(22px,3vw,30px);font-weight:800;letter-spacing:.2px}
    .hero p{margin:0;color:var(--muted)}
    form{padding:20px;display:grid;gap:16px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:720px){.grid,.grid-3{grid-template-columns:1fr}}
    label{display:block;font-weight:600;margin:0 0 6px}
    input,select,textarea{width:100%;padding:12px 14px;border:1px solid #cbd5e1;border-radius:12px;background:#fff;color:var(--text);font-size:16px;outline:none}
    input:focus,select:focus,textarea:focus{border-color:var(--accent);box-shadow:0 0 0 4px rgba(14,165,233,.15)}
    .hint{font-size:12px;color:var(--muted);margin-top:6px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;padding:0 20px 20px}
    button{appearance:none;border:none;background:var(--brand);color:#fff;padding:12px 16px;border-radius:12px;font-weight:700;cursor:pointer}
    button:disabled{background:#94a3b8;cursor:not-allowed}
    button.secondary{background:#eef2ff;color:#263577}
    button.ghost{background:transparent;color:var(--brand);border:1px solid #bfdcff}
    .footer{padding:16px 20px;border-top:1px dashed #e5e7eb;color:var(--muted);font-size:13px}
    .req{color:#ef4444}
    .logo-note{font-size:12px;color:#64748b;margin-top:4px}
    .success-message{background:#dcfce7;border:1px solid #bbf7d0;color:#166534;padding:12px;border-radius:8px;margin:16px 0;display:none}
    .error-message{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px;border-radius:8px;margin:16px 0;display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <!-- Bandera de Honduras (SVG embebido y libre) -->
        <svg aria-label="Bandera de Honduras" width="86" height="60" viewBox="0 0 57 40" xmlns="http://www.w3.org/2000/svg">
          <rect width="57" height="40" fill="#0073cf"/>
          <rect y="13.333" width="57" height="13.333" fill="#fff"/>
          <!-- 5 estrellas -->
          <g fill="#0073cf" transform="translate(28.5,20)">
            <g transform="translate(-13,-3)"><polygon points="0,2 0.588,3.809 2.472,3.809 0.942,4.972 1.53,6.781 0,5.618 -1.53,6.781 -0.942,4.972 -2.472,3.809 -0.588,3.809"/></g>
            <g transform="translate(0,-3)"><polygon points="0,2 0.588,3.809 2.472,3.809 0.942,4.972 1.53,6.781 0,5.618 -1.53,6.781 -0.942,4.972 -2.472,3.809 -0.588,3.809"/></g>
            <g transform="translate(13,-3)"><polygon points="0,2 0.588,3.809 2.472,3.809 0.942,4.972 1.53,6.781 0,5.618 -1.53,6.781 -0.942,4.972 -2.472,3.809 -0.588,3.809"/></g>
            <g transform="translate(-6.5,3)"><polygon points="0,2 0.588,3.809 2.472,3.809 0.942,4.972 1.53,6.781 0,5.618 -1.53,6.781 -0.942,4.972 -2.472,3.809 -0.588,3.809"/></g>
            <g transform="translate(6.5,3)"><polygon points="0,2 0.588,3.809 2.472,3.809 0.942,4.972 1.53,6.781 0,5.618 -1.53,6.781 -0.942,4.972 -2.472,3.809 -0.588,3.809"/></g>
          </g>
        </svg>
        <!-- Logo del Gobierno actual: reemplaza la ruta src por la imagen oficial que maneje tu institución/entidad -->
        <img src="logo-gobierno-hn.png" alt="Logo del Gobierno de Honduras" title="Logo del Gobierno de Honduras" onerror="this.style.display='none'">
      </div>
      <div class="badges">
        <span class="badge">Formulario oficial</span>
        <span class="badge">Honduras</span>
      </div>
    </header>

    <div class="card">
      <div class="hero">
        <h1>Solicitud de Bono Honduras</h1>
        <p>Por favor, complete la siguiente información de manera veraz. Los campos marcados con <span class="req">*</span> son obligatorios.</p>
        <div class="logo-note">Nota: Coloque el archivo del <strong>logo oficial del Gobierno</strong> en el mismo folder con el nombre <code>logo-gobierno-hn.png</code>, o cambie el atributo <code>src</code> en el HTML.</div>
      </div>

      <!-- Mensajes de estado -->
      <div id="successMessage" class="success-message">
        ¡Solicitud enviada exitosamente! Recibirás una confirmación en tu correo electrónico.
      </div>
      <div id="errorMessage" class="error-message">
        Error al enviar la solicitud. Por favor verifica tu conexión e intenta nuevamente.
      </div>

      <!-- Formulario conectado a Formspree -->
      <form id="bonoForm" action="https://formspree.io/f/xanbknvv" method="POST" novalidate>
        <div>
          <label for="nombre">Nombre completo <span class="req">*</span></label>
          <input id="nombre" name="nombre" type="text" placeholder="Ej. María Fernanda Pérez" autocomplete="name" required />
        </div>

        <div class="grid">
          <div>
            <label for="identidad">Número de identidad (DNI) <span class="req">*</span></label>
            <input id="identidad" name="identidad" inputmode="numeric" pattern="^(\d{4}[\s-]?\d{4}[\s-]?\d{5})$" placeholder="0801 1999 01234" required />
            <div class="hint">Formato sugerido: 0801 1999 01234 (13 dígitos)</div>
          </div>
          <div>
            <label for="telefono">Número de teléfono <span class="req">*</span></label>
            <input id="telefono" name="telefono" inputmode="tel" pattern="^\+?\d{8,15}$" placeholder="+504 99999999" required />
            <div class="hint">Incluya código de país si aplica. En Honduras: 8–9 dígitos.</div>
          </div>
        </div>

        <div>
          <label for="trabajo">Trabajo u ocupación <span class="req">*</span></label>
          <input id="trabajo" name="trabajo" type="text" placeholder="Ej. Empleada doméstica / Albañil / Comerciante" required />
        </div>

        <div class="grid-3">
          <div>
            <label for="departamento">Departamento</label>
            <select id="departamento" name="departamento">
              <option value="" selected>Seleccione...</option>
              <option>Atlántida</option><option>Colón</option><option>Comayagua</option><option>Copán</option>
              <option>Cortés</option><option>Choluteca</option><option>El Paraíso</option><option>Francisco Morazán</option>
              <option>Gracias a Dios</option><option>Intibucá</option><option>Islas de la Bahía</option><option>La Paz</option>
              <option>Lempira</option><option>Ocotepeque</option><option>Olancho</option><option>Santa Bárbara</option>
              <option>Valle</option><option>Yoro</option>
            </select>
          </div>
          <div>
            <label for="municipio">Municipio</label>
            <input id="municipio" name="municipio" type="text" placeholder="Ej. San Pedro Sula" />
          </div>
          <div>
            <label for="direccion">Dirección</label>
            <input id="direccion" name="direccion" type="text" placeholder="Barrio/Colonia, referencia..." />
          </div>
        </div>

        <div>
          <label for="comentarios">Observaciones</label>
          <textarea id="comentarios" name="comentarios" rows="3" placeholder="Información adicional (opcional)"></textarea>
        </div>

        <!-- Campo oculto para saber la fecha de envío -->
        <input type="hidden" name="fecha_envio" id="fecha_envio">

        <div class="hint">
          Al enviar, usted autoriza el tratamiento de sus datos conforme a la normativa aplicable de protección de datos en Honduras.
        </div>
      </form>

      <div class="actions">
        <button id="btnEnviar" type="button" title="Validar y enviar">Enviar solicitud</button>
        <button id="btnPDF" class="secondary" type="button" title="Guardar o imprimir">Guardar/Imprimir PDF</button>
        <button id="btnCompartir" class="ghost" type="button" title="Copiar enlace a este formulario">Copiar enlace</button>
      </div>

      <div class="footer">
        <strong>✅ Formulario conectado a Formspree</strong><br>
        Las respuestas de este formulario se enviarán automáticamente a tu correo electrónico. 
        El servicio es gratuito hasta 50 envíos por mes.
      </div>
    </div>
  </div>

  <script>
    // Utilidad: normaliza espacios y mayúsculas
    const norm = s => (s||'').toString().trim().replace(/\s+/g,' ');

    const form = document.getElementById('bonoForm');
    const btnEnviar = document.getElementById('btnEnviar');
    const btnPDF = document.getElementById('btnPDF');
    const btnCompartir = document.getElementById('btnCompartir');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');

    function validate() {
      for (const el of form.querySelectorAll('[required]')) {
        if (!el.checkValidity()) { 
          el.reportValidity(); 
          return false; 
        }
      }
      return true;
    }

    function hideMessages() {
      successMessage.style.display = 'none';
      errorMessage.style.display = 'none';
    }

    function showSuccess() {
      hideMessages();
      successMessage.style.display = 'block';
      successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function showError() {
      hideMessages();
      errorMessage.style.display = 'block';
      errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // ENVÍO CON FORMSPREE
    btnEnviar.addEventListener('click', async () => {
      if (!validate()) return;
      
      // Agregar fecha actual
      document.getElementById('fecha_envio').value = new Date().toLocaleString('es-HN');
      
      // Mostrar estado de carga
      btnEnviar.textContent = 'Enviando...';
      btnEnviar.disabled = true;
      hideMessages();
      
      try {
        const formData = new FormData(form);
        
        // Endpoint de Formspree configurado
        const response = await fetch('https://formspree.io/f/xanbknvv', {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'
          }
        });
        
        if (response.ok) {
          showSuccess();
          form.reset(); // Limpiar formulario
        } else {
          throw new Error('Error en el servidor');
        }
      } catch (error) {
        console.error('Error:', error);
        showError();
      } finally {
        // Restaurar botón
        btnEnviar.textContent = 'Enviar solicitud';
        btnEnviar.disabled = false;
      }
    });

    // Guardar/Imprimir como PDF
    btnPDF.addEventListener('click', () => {
      window.print();
    });

    // Copiar enlace del formulario
    btnCompartir.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(window.location.href);
        btnCompartir.textContent = 'Enlace copiado';
        setTimeout(()=>btnCompartir.textContent='Copiar enlace', 2000);
      } catch (e) {
        alert('No se pudo copiar. Copie manualmente: ' + window.location.href);
      }
    });
  </script>
</body>
</html>